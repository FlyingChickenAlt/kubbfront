{"remainingRequest":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/babel-loader/lib/index.js??ref--1-1!/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/plpetkov/Development/kubb.in/kubb.in-frontend/src/pages/Main.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/src/pages/Main.vue","mtime":1613746448886},{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.split.js\";\nimport \"core-js/modules/es.string.link.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Layout from \"~/layouts/Main.vue\";\nexport default {\n  metaInfo: {\n    title: \"Kubb.in Subscription Manager\"\n  },\n  components: {\n    Layout: Layout\n  },\n  data: function data() {\n    return {\n      test: \"test\"\n    };\n  },\n  mounted: function mounted() {\n    if (typeof window !== \"undefined\") {\n      var user = localStorage.getItem(\"user\");\n      var tokenJSON = JSON.parse(user);\n\n      if (tokenJSON !== null) {\n        sendRequestForSubscriptions(tokenJSON.accessToken);\n      } else {\n        window.location.href = '/login';\n      }\n\n      var deleteAllSubs = function deleteAllSubs() {\n        var resp = prompt(\"Are You Sure? Type yes to continue\");\n        var token = JSON.parse(localStorage.getItem(\"user\"));\n\n        if (resp.toLowerCase() === \"yes\") {\n          var myHeaders = new Headers();\n          myHeaders.append(\"Authorization\", \"Bearer \".concat(token.accessToken));\n          var requestOptions = {\n            method: \"DELETE\",\n            headers: myHeaders,\n            redirect: \"follow\"\n          };\n          fetch(\"https://kubb.in:8080/api/subscriptions/\", requestOptions).then(function (response) {\n            return response.text();\n          }).then(function (result) {\n            return window.location.reload();\n          })[\"catch\"](function (error) {\n            return console.log(\"error\", error);\n          });\n        }\n      };\n    }\n  },\n  methods: {\n    logout: function logout() {\n      localStorage.removeItem(\"user\");\n      window.location.href = \"/login\";\n    }\n  }\n};\n\nvar processData = function processData(d) {\n  var table = document.getElementById(\"table-data\");\n  var header = document.getElementById(\"header-table\");\n  var row, cellar, cellcurr, celllink, cellname, cellnr, cellpri, cellreg, headCell;\n  d.forEach(function (element) {\n    row = document.createElement(\"tr\");\n    cellar = document.createElement(\"td\");\n    cellar.setAttribute(\"data-label\", \"Auto Renewal\");\n    cellcurr = document.createElement(\"td\");\n    cellcurr.setAttribute(\"data-label\", \"Currency\");\n    celllink = document.createElement(\"td\");\n    celllink.setAttribute(\"data-label\", \"Website\");\n    cellname = document.createElement(\"td\");\n    cellname.setAttribute(\"scope\", \"row\");\n    cellname.setAttribute(\"data-label\", \"Name\");\n    cellnr = document.createElement(\"td\");\n    cellnr.setAttribute(\"data-label\", \"Next Renewal\");\n    cellpri = document.createElement(\"td\");\n    cellpri.setAttribute(\"data-label\", \"Price\");\n    cellreg = document.createElement(\"td\");\n    cellreg.setAttribute(\"data-label\", \"Regularity\");\n    cellname.innerText = element.name;\n    celllink.innerText = element.link;\n    cellpri.innerText = element.price;\n    cellcurr.innerText = element.currency;\n    cellreg.innerText = element.regularity;\n    cellnr.innerText = element.nextRenewal.split(\"T\")[0];\n    cellar.innerText = element.autoRenewal === \"true\" ? \"Yes\" : \"No\";\n    row.append(cellname, celllink, cellpri, cellcurr, cellreg, cellnr, cellar);\n    table.appendChild(row);\n  });\n};\n\nvar sendRequestForSubscriptions = function sendRequestForSubscriptions(token) {\n  var myHeaders = new Headers();\n  myHeaders.append(\"Authorization\", \"Bearer \".concat(token));\n  var requestOptions = {\n    method: \"GET\",\n    headers: myHeaders,\n    redirect: \"follow\"\n  };\n  fetch(\"https://kubb.in:8080/api/subscriptions/\", requestOptions).then(function (response) {\n    return response.json();\n  }).then(function (result) {\n    return processData(result);\n  })[\"catch\"](function (error) {\n    return console.log(\"error\", error);\n  });\n};",{"version":3,"sources":["/home/plpetkov/Development/kubb.in/kubb.in-frontend/src/pages/Main.vue"],"names":["Layout","metaInfo","title","components","data","test","mounted","window","user","localStorage","getItem","tokenJSON","JSON","parse","sendRequestForSubscriptions","accessToken","location","href","deleteAllSubs","resp","prompt","token","toLowerCase","myHeaders","Headers","append","requestOptions","method","headers","redirect","fetch","then","response","text","result","reload","error","console","log","methods","logout","removeItem","processData","d","table","document","getElementById","header","row","cellar","cellcurr","celllink","cellname","cellnr","cellpri","cellreg","headCell","forEach","element","createElement","setAttribute","innerText","name","link","price","currency","regularity","nextRenewal","split","autoRenewal","appendChild","json"],"mappings":"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","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Layout from \"~/layouts/Main.vue\";\n\nexport default {\n  metaInfo: {\n    title: \"Kubb.in Subscription Manager\",\n  },\n  components: {\n    Layout,\n  },\n  data() {\n    return {\n      test: \"test\",\n    };\n  },\n  mounted() {\n    if (typeof window !== \"undefined\") {\n      const user = localStorage.getItem(\"user\");\n      const tokenJSON = JSON.parse(user);\n      if (tokenJSON !== null) {\n        sendRequestForSubscriptions(tokenJSON.accessToken);\n      } else {\n        window.location.href = '/login'\n      }\n      const deleteAllSubs = () => {\n        let resp = prompt(\"Are You Sure? Type yes to continue\");\n        let token = JSON.parse(localStorage.getItem(\"user\"));\n        if (resp.toLowerCase() === \"yes\") {\n          var myHeaders = new Headers();\n          myHeaders.append(\"Authorization\", `Bearer ${token.accessToken}`);\n\n          var requestOptions = {\n            method: \"DELETE\",\n            headers: myHeaders,\n            redirect: \"follow\",\n          };\n\n          fetch(\"https://kubb.in:8080/api/subscriptions/\", requestOptions)\n            .then((response) => response.text())\n            .then((result) => window.location.reload())\n            .catch((error) => console.log(\"error\", error));\n        }\n      };\n      \n      \n    }\n  },\n  methods: {\n    logout() {\n      localStorage.removeItem(\"user\");\n      window.location.href = \"/login\";\n    },\n  },\n};\n\nconst processData = (d) => {\n  const table = document.getElementById(\"table-data\");\n  const header = document.getElementById(\"header-table\");\n  let row,\n    cellar,\n    cellcurr,\n    celllink,\n    cellname,\n    cellnr,\n    cellpri,\n    cellreg,\n    headCell;\n  d.forEach((element) => {\n    row = document.createElement(\"tr\");\n    cellar = document.createElement(\"td\");\n    cellar.setAttribute(\"data-label\", \"Auto Renewal\");\n    cellcurr = document.createElement(\"td\");\n    cellcurr.setAttribute(\"data-label\", \"Currency\");\n    celllink = document.createElement(\"td\");\n    celllink.setAttribute(\"data-label\", \"Website\");\n    cellname = document.createElement(\"td\");\n    cellname.setAttribute(\"scope\", \"row\");\n    cellname.setAttribute(\"data-label\", \"Name\");\n    cellnr = document.createElement(\"td\");\n    cellnr.setAttribute(\"data-label\", \"Next Renewal\");\n    cellpri = document.createElement(\"td\");\n    cellpri.setAttribute(\"data-label\", \"Price\");\n    cellreg = document.createElement(\"td\");\n    cellreg.setAttribute(\"data-label\", \"Regularity\");\n\n    cellname.innerText = element.name;\n    celllink.innerText = element.link;\n    cellpri.innerText = element.price;\n    cellcurr.innerText = element.currency;\n    cellreg.innerText = element.regularity;\n    cellnr.innerText = element.nextRenewal.split(\"T\")[0];\n    cellar.innerText = element.autoRenewal === \"true\" ? \"Yes\" : \"No\";\n\n    row.append(cellname, celllink, cellpri, cellcurr, cellreg, cellnr, cellar);\n    table.appendChild(row);\n  });\n};\n\nconst sendRequestForSubscriptions = (token) => {\n  var myHeaders = new Headers();\n  myHeaders.append(\"Authorization\", `Bearer ${token}`);\n\n  var requestOptions = {\n    method: \"GET\",\n    headers: myHeaders,\n    redirect: \"follow\",\n  };\n\n  fetch(\"https://kubb.in:8080/api/subscriptions/\", requestOptions)\n    .then((response) => response.json())\n    .then((result) => processData(result))\n    .catch((error) => console.log(\"error\", error));\n};\n"]}]}