{"remainingRequest":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/babel-loader/lib/index.js??ref--1-1!/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/plpetkov/Development/kubb.in/kubb.in-frontend/src/pages/Main.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/src/pages/Main.vue","mtime":1613746448886},{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.split.js\";\nimport \"core-js/modules/es.string.link.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Layout from \"~/layouts/Main.vue\";\nexport default {\n  metaInfo: {\n    title: \"Kubb.in Subscription Manager\"\n  },\n  components: {\n    Layout: Layout\n  },\n  data: function data() {\n    return {\n      test: \"test\"\n    };\n  },\n  mounted: function mounted() {\n    if (typeof window !== \"undefined\") {\n      var user = localStorage.getItem(\"user\");\n      var tokenJSON = JSON.parse(user);\n\n      if (tokenJSON !== null) {\n        sendRequestForSubscriptions(tokenJSON.accessToken);\n      } else {\n        window.location.href = '/login';\n      }\n\n      var deleteAllSubs = function deleteAllSubs() {\n        var resp = prompt(\"Are You Sure? Type yes to continue\");\n        var token = JSON.parse(localStorage.getItem(\"user\"));\n\n        if (resp.toLowerCase() === \"yes\") {\n          var myHeaders = new Headers();\n          myHeaders.append(\"Authorization\", \"Bearer \".concat(token.accessToken));\n          var requestOptions = {\n            method: \"DELETE\",\n            headers: myHeaders,\n            redirect: \"follow\"\n          };\n          fetch(\"https://kubb.in:8080/api/subscriptions/\", requestOptions).then(function (response) {\n            return response.text();\n          }).then(function (result) {\n            return window.location.reload();\n          })[\"catch\"](function (error) {\n            return console.log(\"error\", error);\n          });\n        }\n      };\n    }\n  },\n  methods: {\n    logout: function logout() {\n      localStorage.removeItem(\"user\");\n      window.location.href = \"/login\";\n    }\n  }\n};\n\nvar processData = function processData(d) {\n  var table = document.getElementById(\"table-data\");\n  var header = document.getElementById(\"header-table\");\n  var row, cellar, cellcurr, celllink, cellname, cellnr, cellpri, cellreg, headCell;\n  d.forEach(function (element) {\n    row = document.createElement(\"tr\");\n    cellar = document.createElement(\"td\");\n    cellar.setAttribute(\"data-label\", \"Auto Renewal\");\n    cellcurr = document.createElement(\"td\");\n    cellcurr.setAttribute(\"data-label\", \"Currency\");\n    celllink = document.createElement(\"td\");\n    celllink.setAttribute(\"data-label\", \"Website\");\n    cellname = document.createElement(\"td\");\n    cellname.setAttribute(\"scope\", \"row\");\n    cellname.setAttribute(\"data-label\", \"Name\");\n    cellnr = document.createElement(\"td\");\n    cellnr.setAttribute(\"data-label\", \"Next Renewal\");\n    cellpri = document.createElement(\"td\");\n    cellpri.setAttribute(\"data-label\", \"Price\");\n    cellreg = document.createElement(\"td\");\n    cellreg.setAttribute(\"data-label\", \"Regularity\");\n    cellname.innerText = element.name;\n    celllink.innerText = element.link;\n    cellpri.innerText = element.price;\n    cellcurr.innerText = element.currency;\n    cellreg.innerText = element.regularity;\n    cellnr.innerText = element.nextRenewal.split(\"T\")[0];\n    cellar.innerText = element.autoRenewal === \"true\" ? \"Yes\" : \"No\";\n    row.append(cellname, celllink, cellpri, cellcurr, cellreg, cellnr, cellar);\n    table.appendChild(row);\n  });\n};\n\nvar sendRequestForSubscriptions = function sendRequestForSubscriptions(token) {\n  var myHeaders = new Headers();\n  myHeaders.append(\"Authorization\", \"Bearer \".concat(token));\n  var requestOptions = {\n    method: \"GET\",\n    headers: myHeaders,\n    redirect: \"follow\"\n  };\n  fetch(\"https://kubb.in:8080/api/subscriptions/\", requestOptions).then(function (response) {\n    return response.json();\n  }).then(function (result) {\n    return processData(result);\n  })[\"catch\"](function (error) {\n    return console.log(\"error\", error);\n  });\n};",null]}