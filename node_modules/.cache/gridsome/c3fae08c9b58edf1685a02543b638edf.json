{"remainingRequest":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/babel-loader/lib/index.js??ref--1-1!/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/plpetkov/Development/kubb.in/kubb.in-frontend/src/pages/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/src/pages/Login.vue","mtime":1613745865500},{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.includes.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  metaInfo: {\n    title: \"Login Page\"\n  },\n  data: function data() {\n    return {\n      username: \"\",\n      password: \"\",\n      hidePassword: true,\n      jsonRequest: {}\n    };\n  },\n  mounted: function mounted() {\n    if (typeof window !== \"undefined\") {\n      var user = localStorage.getItem(\"user\");\n      var tokenJSON = JSON.parse(user);\n\n      if (user != null) {\n        if (user.includes(\"ROLE_USER\")) {\n          window.location.href = \"/main\";\n        }\n      }\n\n      var _redirectWithToken = function _redirectWithToken(token) {\n        if (token !== undefined) {\n          localStorage.setItem(\"user\", JSON.stringify(token));\n          window.location.href = \"/main\";\n        }\n      };\n    }\n  },\n  computed: {\n    passwordType: function passwordType() {\n      return this.hidePassword ? \"password\" : \"text\";\n    },\n    passwordIcon: function passwordIcon() {\n      return this.hidePassword ? \"fa-eye\" : \"fa-eye-slash\";\n    }\n  },\n  methods: {\n    doLogin: function doLogin() {\n      if (typeof window !== 'undefined') {\n        sendLoginRequest(\"\".concat(username.value), \"\".concat(password.value));\n      }\n    },\n    checkIfLogged: function checkIfLogged() {\n      console.log(\"jsontoken \", data.user);\n    }\n  }\n};\n\nvar redirectWithToken = function redirectWithToken(token) {\n  if (typeof window !== 'undefined') {\n    if (token !== undefined) {\n      localStorage.setItem(\"user\", JSON.stringify(token));\n      window.location.href = \"/main\";\n    }\n  }\n};\n\nfunction sendLoginRequest(u, p) {\n  var myHeaders = new Headers();\n  myHeaders.append(\"Content-Type\", \"application/json\");\n  var raw = JSON.stringify({\n    username: u,\n    password: p\n  });\n  var requestOptions = {\n    method: \"POST\",\n    headers: myHeaders,\n    body: raw,\n    redirect: \"follow\"\n  };\n  fetch(\"https://kubb.in:8080/api/auth/signin\", requestOptions).then(function (response) {\n    return response.json();\n  }).then(function (result) {\n    return result.error ? console.log(\"wrong password todo\") : redirectWithToken(result);\n  })[\"catch\"](function (error) {\n    return console.log(\"error\", error);\n  });\n}",null]}