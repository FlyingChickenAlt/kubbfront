{"remainingRequest":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/babel-loader/lib/index.js??ref--1-1!/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/plpetkov/Development/kubb.in/kubb.in-frontend/src/pages/Add.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/src/pages/Add.vue","mtime":1613746801589},{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.split.js\";\nimport \"core-js/modules/es.string.link.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/web.timers.js\";\nimport _defineProperty from \"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Layout from \"~/layouts/Main.vue\";\nexport default _defineProperty({\n  metaInfo: {\n    title: \"Add a new Subscription\"\n  },\n  components: {\n    Layout: Layout\n  },\n  data: function data() {\n    return {\n      subname: \"\",\n      autorenewal: \"\",\n      currency: \"\",\n      price: \"\",\n      nextrenewal: \"\",\n      site: \"\",\n      regularity: \"\"\n    };\n  },\n  methods: {\n    sendRequestAddNewSubscription: function sendRequestAddNewSubscription() {\n      sendRequestAddNewSubscriptionf(tokenJSON.accessToken, this.getFormObj());\n    },\n    getFormObj: function getFormObj() {\n      return {\n        name: this.subname,\n        autorenewal: this.autorenewal,\n        currency: this.currency,\n        price: this.price,\n        nextrenewal: this.nextrenewal,\n        site: this.site,\n        regularity: this.regularity\n      };\n    }\n  },\n  mounted: function mounted() {\n    if (typeof window !== \"undefined\") {\n      var user = localStorage.getItem(\"user\");\n\n      var _tokenJSON = JSON.parse(user);\n\n      window.addEventListener(\"load\", function () {\n        if (_tokenJSON == undefined || _tokenJSON == null) {\n          window.location.href = \"/login\";\n        }\n      });\n\n      var processData = function processData(d) {\n        var table = document.getElementById(\"table-data\");\n        var header = document.getElementById(\"header-table\");\n        var row, cellar, cellcurr, celllink, cellname, cellnr, cellpri, cellreg, headCell;\n        d.forEach(function (element) {\n          row = document.createElement(\"tr\");\n          cellar = document.createElement(\"td\");\n          cellar.setAttribute(\"data-label\", \"Auto Renewal\");\n          cellcurr = document.createElement(\"td\");\n          cellcurr.setAttribute(\"data-label\", \"Currency\");\n          celllink = document.createElement(\"td\");\n          celllink.setAttribute(\"data-label\", \"Website\");\n          cellname = document.createElement(\"td\");\n          cellname.setAttribute(\"scope\", \"row\");\n          cellname.setAttribute(\"data-label\", \"Name\");\n          cellnr = document.createElement(\"td\");\n          cellnr.setAttribute(\"data-label\", \"Next Renewal\");\n          cellpri = document.createElement(\"td\");\n          cellpri.setAttribute(\"data-label\", \"Price\");\n          cellreg = document.createElement(\"td\");\n          cellreg.setAttribute(\"data-label\", \"Regularity\");\n          cellname.innerText = element.name;\n          celllink.innerText = element.link;\n          cellpri.innerText = element.price;\n          cellcurr.innerText = element.currency;\n          cellreg.innerText = element.regularity;\n          cellnr.innerText = element.nextRenewal.split(\"T\")[0];\n          cellar.innerText = element.autoRenewal === \"true\" ? \"Yes\" : \"No\";\n          row.append(cellname, celllink, cellpri, cellcurr, cellreg, cellnr, cellar);\n          table.appendChild(row);\n        });\n      };\n\n      var sendRequestForSubscriptions = function sendRequestForSubscriptions(token) {\n        var myHeaders = new Headers();\n        myHeaders.append(\"Authorization\", \"Bearer \".concat(token));\n        var requestOptions = {\n          method: \"GET\",\n          headers: myHeaders,\n          redirect: \"follow\"\n        };\n        fetch(\"https://kubb.in:8080/api/subscriptions/\", requestOptions).then(function (response) {\n          return response.json();\n        }).then(function (result) {\n          return processData(result);\n        })[\"catch\"](function (error) {\n          return console.log(\"error\", error);\n        });\n      };\n\n      var submitBtn = document.getElementById(\"submitBtn\");\n      /*\n      */\n\n      var _sendRequestAddNewSubscriptionf = function _sendRequestAddNewSubscriptionf(token, sub) {\n        var validations = validateSub(sub);\n\n        if (validations) {\n          var myHeaders = new Headers();\n          myHeaders.append(\"Authorization\", \"Bearer \".concat(token));\n          myHeaders.append(\"Content-Type\", \"application/json\");\n          var raw = JSON.stringify({\n            autoRenewal: \"\".concat(sub.autorenewal),\n            currency: \"\".concat(sub.currency),\n            link: \"\".concat(sub.site),\n            name: \"\".concat(sub.name),\n            nextRenewal: \"\".concat(sub.nextrenewal),\n            price: \"\".concat(sub.price),\n            regularity: \"\".concat(sub.regularity)\n          });\n          var requestOptions = {\n            method: \"PUT\",\n            headers: myHeaders,\n            body: raw,\n            redirect: \"follow\"\n          };\n          fetch(\"https://kubb.in:8080/api/subscription/\", requestOptions).then(function (response) {\n            return response.text();\n          }).then(function (result) {\n            return window.location.reload();\n          })[\"catch\"](function (error) {\n            return console.log(\"error\", error);\n          });\n        }\n      };\n\n      var deleteAllSubs = function deleteAllSubs() {\n        var resp = prompt(\"Are You Sure? Type yes to continue\");\n\n        if (resp.toLowerCase() === \"yes\") {\n          var myHeaders = new Headers();\n          myHeaders.append(\"Authorization\", \"Bearer \".concat(_tokenJSON.accessToken));\n          var requestOptions = {\n            method: \"DELETE\",\n            headers: myHeaders,\n            redirect: \"follow\"\n          };\n          fetch(\"https://kubb.in:8080/api/subscriptions/\", requestOptions).then(function (response) {\n            return response.text();\n          }).then(function (result) {\n            return window.location.reload();\n          })[\"catch\"](function (error) {\n            return console.log(\"error\", error);\n          });\n        }\n      };\n\n      var logout = function logout() {\n        localStorage.removeItem(\"user\");\n      };\n\n      var showAlert = function showAlert(alert) {\n        var alertParent = alert.parentElement;\n        var alertEle = document.createElement(\"div\");\n        alertEle.innerText = \"Wrong input, please introduce valid data\";\n        alertEle.className = \"alert alert-danger fade show\";\n        alertParent.insertBefore(alertEle, alert.parentElement.children[0]);\n        console.log(alertEle);\n        setTimeout(closeAlert, 2500);\n      };\n\n      var closeAlert = function closeAlert() {\n        //$(\".alert\").alert(\"close\");\n        document.getElementsByClassName(\"alert\")[0].remove();\n      };\n\n      var validateSub = function validateSub(sub) {\n        //name is not empty or null\n        if (sub.name == \"\" || sub.name == null || sub.name == undefined) {\n          showAlert(document.getElementById(\"name\"));\n          return false;\n        }\n\n        if (sub.site == \"\" || sub.site == null || sub.site == undefined) {\n          showAlert(document.getElementById(\"site\"));\n          return false;\n        } //price is only numbers\n\n\n        if (/[0-9]{1,}/.test(sub.price) != true || sub.price == null || sub.price == undefined) {\n          showAlert(price);\n          return false;\n        } //currency is only letters\n\n\n        if (sub.currency == \"\" || sub.currency == null || sub.currency == undefined) {\n          showAlert(currency);\n          return false;\n        } //regularity is only letters\n\n\n        if (sub.regularity == \"\" || sub.regularity == null || sub.regularity == undefined) {\n          showAlert(regularity);\n          return false;\n        } //autorenewal is true or false\n\n\n        console.log(sub.autorenewal);\n\n        if (sub.autorenewal != \"true\" && sub.autorenewal != \"false\" || sub.autorenewal == null || sub.autorenewal == undefined) {\n          showAlert(autorenewal);\n          return false;\n        }\n\n        return true;\n      };\n\n      if (_tokenJSON != null) {\n        sendRequestForSubscriptions(_tokenJSON.accessToken);\n      }\n    }\n  },\n  created: function created() {}\n}, \"metaInfo\", {\n  title: \"About us\"\n});",{"version":3,"sources":["Add.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <Layout>\n    <div class=\"my-3 p-3 bg-white rounded box-shadow\">\n      <h2 class=\"titleAdd\">Add a new Subscription</h2>\n      <form id=\"newsub\">\n        <div class=\"form-group rounded box-shadow\">\n          <label for=\"name\">Name</label>\n          <input v-model=\"subname\" type=\"text\" name=\"name\" id=\"name\" />\n        </div>\n        <div class=\"form-group rounded box-shadow\">\n          <label for=\"site\">Website</label>\n          <input v-model=\"site\" type=\"text\" name=\"site\" id=\"site\" />\n        </div>\n        <div class=\"form-group rounded box-shadow\">\n          <label for=\"price\">Price</label>\n          <input v-model=\"price\" type=\"text\" name=\"price\" id=\"price\" />\n        </div>\n        <div class=\"form-group rounded box-shadow\">\n          <label for=\"currency\">Currency</label>\n          <select v-model=\"currency\" id=\"currency\">\n            <option value=\"AED\">AED</option>\n            <option value=\"ARS\">ARS</option>\n            <option value=\"AUD\">AUD</option>\n            <option value=\"BGN\">BGN</option>\n            <option value=\"BRL\">BRL</option>\n            <option value=\"BSD\">BSD</option>\n            <option value=\"CAD\">CAD</option>\n            <option value=\"CHF\">CHF</option>\n            <option value=\"CLP\">CLP</option>\n            <option value=\"CNY\">CNY</option>\n            <option value=\"COP\">COP</option>\n            <option value=\"CZK\">CZK</option>\n            <option value=\"DKK\">DKK</option>\n            <option value=\"DOP\">DOP</option>\n            <option value=\"EGP\">EGP</option>\n            <option value=\"EUR\">EUR</option>\n            <option value=\"FJD\">FJD</option>\n            <option value=\"GBP\">GBP</option>\n            <option value=\"GTQ\">GTQ</option>\n            <option value=\"HKD\">HKD</option>\n            <option value=\"HRK\">HRK</option>\n            <option value=\"HUF\">HUF</option>\n            <option value=\"IDR\">IDR</option>\n            <option value=\"ILS\">ILS</option>\n            <option value=\"INR\">INR</option>\n            <option value=\"ISK\">ISK</option>\n            <option value=\"JPY\">JPY</option>\n            <option value=\"KRW\">KRW</option>\n            <option value=\"KZT\">KZT</option>\n            <option value=\"MXN\">MXN</option>\n            <option value=\"MYR\">MYR</option>\n            <option value=\"NOK\">NOK</option>\n            <option value=\"NZD\">NZD</option>\n            <option value=\"PAB\">PAB</option>\n            <option value=\"PEN\">PEN</option>\n            <option value=\"PHP\">PHP</option>\n            <option value=\"PKR\">PKR</option>\n            <option value=\"PLN\">PLN</option>\n            <option value=\"PYG\">PYG</option>\n            <option value=\"RON\">RON</option>\n            <option value=\"RUB\">RUB</option>\n            <option value=\"SAR\">SAR</option>\n            <option value=\"SEK\">SEK</option>\n            <option value=\"SGD\">SGD</option>\n            <option value=\"THB\">THB</option>\n            <option value=\"TRY\">TRY</option>\n            <option value=\"TWD\">TWD</option>\n            <option value=\"UAH\">UAH</option>\n            <option value=\"USD\" selected=\"\">USD</option>\n            <option value=\"UYU\">UYU</option>\n            <option value=\"VND\">VND</option>\n            <option value=\"ZAR\">ZAR</option>\n          </select>\n        </div>\n        <div class=\"form-group rounded box-shadow\">\n          <label for=\"regularity\">Regularity</label>\n          <select v-model=\"regularity\" id=\"regularity\">\n            <option>Daily</option>\n            <option>Weekly</option>\n            <option>Monthly</option>\n            <option>Yearly</option>\n            <option>Other...</option>\n          </select>\n        </div>\n        <div class=\"form-group rounded box-shadow\">\n          <label for=\"renewal\">Date of next Renewal</label>\n          <input\n            v-model=\"nextrenewal\"\n            type=\"date\"\n            name=\"renewal\"\n            id=\"renewal\"\n          />\n        </div>\n        <div class=\"form-group rounded box-shadow\">\n          <label for=\"autorenewal\">Auto Renewal?</label>\n          <select v-model=\"autorenewal\" id=\"autorenewal\">\n            <option value=\"true\">Yes</option>\n            <option value=\"false\">No</option>\n          </select>\n        </div>\n      </form>\n    </div>\n    <button\n      type=\"button\"\n      id=\"submitBtn\"\n      @click=\"sendRequestAddNewSubscription()\"\n      class=\"btn btn-secondary btn-lg\"\n    >\n      Add\n    </button>\n\n    <div class=\"my-3 p-3 bg-white rounded box-shadow\">\n      <h2 class=\"titleAdd\">Your subscriptions</h2>\n      <table class=\"table table-light table-responsive\">\n        <thead>\n          <tr>\n            <th scope=\"col\">Name</th>\n            <th scope=\"col\">Website</th>\n            <th scope=\"col\">Price</th>\n            <th scope=\"col\">Currency</th>\n            <th scope=\"col\">Regularity</th>\n            <th scope=\"col\">Next Renewal</th>\n            <th scope=\"col\">Auto Renewal</th>\n          </tr>\n        </thead>\n        <tbody id=\"table-data\"></tbody>\n      </table>\n    </div>\n  </Layout>\n</template>\n\n<script>\nimport Layout from \"~/layouts/Main.vue\";\n\nexport default {\n  metaInfo: {\n    title: \"Add a new Subscription\",\n  },\n  components: {\n    Layout,\n  },\n  data() {\n    return {\n      subname: \"\",\n      autorenewal: \"\",\n      currency: \"\",\n      price: \"\",\n      nextrenewal: \"\",\n      site: \"\",\n      regularity: \"\",\n    };\n  },\n  methods: {\n    sendRequestAddNewSubscription() {\n      sendRequestAddNewSubscriptionf(tokenJSON.accessToken, this.getFormObj());\n    },\n    getFormObj() {\n      return {\n        name: this.subname,\n        autorenewal: this.autorenewal,\n        currency: this.currency,\n        price: this.price,\n        nextrenewal: this.nextrenewal,\n        site: this.site,\n        regularity: this.regularity,\n      };\n    },\n  },\n  mounted() {\n    if (typeof window !== `undefined`) {\n      const user = localStorage.getItem(\"user\");\n      const tokenJSON = JSON.parse(user);\n      window.addEventListener(\"load\", () => {\n        if (tokenJSON == undefined || tokenJSON == null) {\n          window.location.href = \"/login\";\n        }\n      });\n\n      const processData = (d) => {\n        const table = document.getElementById(\"table-data\");\n        const header = document.getElementById(\"header-table\");\n        let row,\n          cellar,\n          cellcurr,\n          celllink,\n          cellname,\n          cellnr,\n          cellpri,\n          cellreg,\n          headCell;\n        d.forEach((element) => {\n          row = document.createElement(\"tr\");\n          cellar = document.createElement(\"td\");\n          cellar.setAttribute(\"data-label\", \"Auto Renewal\");\n          cellcurr = document.createElement(\"td\");\n          cellcurr.setAttribute(\"data-label\", \"Currency\");\n          celllink = document.createElement(\"td\");\n          celllink.setAttribute(\"data-label\", \"Website\");\n          cellname = document.createElement(\"td\");\n          cellname.setAttribute(\"scope\", \"row\");\n          cellname.setAttribute(\"data-label\", \"Name\");\n          cellnr = document.createElement(\"td\");\n          cellnr.setAttribute(\"data-label\", \"Next Renewal\");\n          cellpri = document.createElement(\"td\");\n          cellpri.setAttribute(\"data-label\", \"Price\");\n          cellreg = document.createElement(\"td\");\n          cellreg.setAttribute(\"data-label\", \"Regularity\");\n\n          cellname.innerText = element.name;\n          celllink.innerText = element.link;\n          cellpri.innerText = element.price;\n          cellcurr.innerText = element.currency;\n          cellreg.innerText = element.regularity;\n          cellnr.innerText = element.nextRenewal.split(\"T\")[0];\n          cellar.innerText = element.autoRenewal === \"true\" ? \"Yes\" : \"No\";\n\n          row.append(\n            cellname,\n            celllink,\n            cellpri,\n            cellcurr,\n            cellreg,\n            cellnr,\n            cellar\n          );\n          table.appendChild(row);\n        });\n      };\n\n      const sendRequestForSubscriptions = (token) => {\n        var myHeaders = new Headers();\n        myHeaders.append(\"Authorization\", `Bearer ${token}`);\n\n        var requestOptions = {\n          method: \"GET\",\n          headers: myHeaders,\n          redirect: \"follow\",\n        };\n\n        fetch(\"https://kubb.in:8080/api/subscriptions/\", requestOptions)\n          .then((response) => response.json())\n          .then((result) => processData(result))\n          .catch((error) => console.log(\"error\", error));\n      };\n      const submitBtn = document.getElementById(\"submitBtn\");\n      /*\n\n\n*/\n      const sendRequestAddNewSubscriptionf = (token, sub) => {\n        let validations = validateSub(sub);\n        if (validations) {\n          var myHeaders = new Headers();\n          myHeaders.append(\"Authorization\", `Bearer ${token}`);\n          myHeaders.append(\"Content-Type\", \"application/json\");\n\n          var raw = JSON.stringify({\n            autoRenewal: `${sub.autorenewal}`,\n            currency: `${sub.currency}`,\n            link: `${sub.site}`,\n            name: `${sub.name}`,\n            nextRenewal: `${sub.nextrenewal}`,\n            price: `${sub.price}`,\n            regularity: `${sub.regularity}`,\n          });\n\n          var requestOptions = {\n            method: \"PUT\",\n            headers: myHeaders,\n            body: raw,\n            redirect: \"follow\",\n          };\n\n          fetch(\"https://kubb.in:8080/api/subscription/\", requestOptions)\n            .then((response) => response.text())\n            .then((result) => window.location.reload())\n            .catch((error) => console.log(\"error\", error));\n        }\n      };\n\n      const deleteAllSubs = () => {\n        let resp = prompt(\"Are You Sure? Type yes to continue\");\n\n        if (resp.toLowerCase() === \"yes\") {\n          var myHeaders = new Headers();\n          myHeaders.append(\"Authorization\", `Bearer ${tokenJSON.accessToken}`);\n\n          var requestOptions = {\n            method: \"DELETE\",\n            headers: myHeaders,\n            redirect: \"follow\",\n          };\n\n          fetch(\"https://kubb.in:8080/api/subscriptions/\", requestOptions)\n            .then((response) => response.text())\n            .then((result) => window.location.reload())\n            .catch((error) => console.log(\"error\", error));\n        }\n      };\n      const logout = () => {\n        localStorage.removeItem(\"user\");\n      };\n\n      const showAlert = (alert) => {\n        const alertParent = alert.parentElement;\n        const alertEle = document.createElement(\"div\");\n        alertEle.innerText = \"Wrong input, please introduce valid data\";\n        alertEle.className = \"alert alert-danger fade show\";\n        alertParent.insertBefore(alertEle, alert.parentElement.children[0]);\n        console.log(alertEle);\n\n        setTimeout(closeAlert, 2500);\n      };\n\n      const closeAlert = () => {\n        //$(\".alert\").alert(\"close\");\n        document.getElementsByClassName(\"alert\")[0].remove();\n      };\n\n      const validateSub = (sub) => {\n        //name is not empty or null\n        if (sub.name == \"\" || sub.name == null || sub.name == undefined) {\n          showAlert(document.getElementById(\"name\"));\n\n          return false;\n        }\n        if (sub.site == \"\" || sub.site == null || sub.site == undefined) {\n          showAlert(document.getElementById(\"site\"));\n\n          return false;\n        }\n        //price is only numbers\n        if (\n          /[0-9]{1,}/.test(sub.price) != true ||\n          sub.price == null ||\n          sub.price == undefined\n        ) {\n          showAlert(price);\n\n          return false;\n        }\n        //currency is only letters\n        if (\n          sub.currency == \"\" ||\n          sub.currency == null ||\n          sub.currency == undefined\n        ) {\n          showAlert(currency);\n\n          return false;\n        }\n        //regularity is only letters\n        if (\n          sub.regularity == \"\" ||\n          sub.regularity == null ||\n          sub.regularity == undefined\n        ) {\n          showAlert(regularity);\n\n          return false;\n        }\n        //autorenewal is true or false\n        console.log(sub.autorenewal);\n        if (\n          (sub.autorenewal != \"true\" && sub.autorenewal != \"false\") ||\n          sub.autorenewal == null ||\n          sub.autorenewal == undefined\n        ) {\n          showAlert(autorenewal);\n\n          return false;\n        }\n        return true;\n      };\n    if (tokenJSON != null) {\n      sendRequestForSubscriptions(tokenJSON.accessToken);\n    }\n    }\n  },\n  created() {\n    \n  },\n  metaInfo: {\n    title: \"About us\",\n  },\n};\n</script>\n"],"sourceRoot":"src/pages"}]}