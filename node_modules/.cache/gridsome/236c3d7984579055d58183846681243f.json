{"remainingRequest":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/babel-loader/lib/index.js??ref--1-1!/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/plpetkov/Development/kubb.in/kubb.in-frontend/src/pages/Main.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/src/pages/Main.vue","mtime":1613746448886},{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.split.js\";\nimport \"core-js/modules/es.string.link.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Layout from \"~/layouts/Main.vue\";\nexport default {\n  metaInfo: {\n    title: \"Kubb.in Subscription Manager\"\n  },\n  components: {\n    Layout: Layout\n  },\n  data: function data() {\n    return {\n      test: \"test\"\n    };\n  },\n  mounted: function mounted() {\n    if (typeof window !== \"undefined\") {\n      var user = localStorage.getItem(\"user\");\n      var tokenJSON = JSON.parse(user);\n\n      if (tokenJSON !== null) {\n        sendRequestForSubscriptions(tokenJSON.accessToken);\n      } else {\n        window.location.href = '/login';\n      }\n\n      var deleteAllSubs = function deleteAllSubs() {\n        var resp = prompt(\"Are You Sure? Type yes to continue\");\n        var token = JSON.parse(localStorage.getItem(\"user\"));\n\n        if (resp.toLowerCase() === \"yes\") {\n          var myHeaders = new Headers();\n          myHeaders.append(\"Authorization\", \"Bearer \".concat(token.accessToken));\n          var requestOptions = {\n            method: \"DELETE\",\n            headers: myHeaders,\n            redirect: \"follow\"\n          };\n          fetch(\"https://kubb.in:8080/api/subscriptions/\", requestOptions).then(function (response) {\n            return response.text();\n          }).then(function (result) {\n            return window.location.reload();\n          })[\"catch\"](function (error) {\n            return console.log(\"error\", error);\n          });\n        }\n      };\n    }\n  },\n  methods: {\n    logout: function logout() {\n      localStorage.removeItem(\"user\");\n      window.location.href = \"/login\";\n    }\n  }\n};\n\nvar processData = function processData(d) {\n  var table = document.getElementById(\"table-data\");\n  var header = document.getElementById(\"header-table\");\n  var row, cellar, cellcurr, celllink, cellname, cellnr, cellpri, cellreg, headCell;\n  d.forEach(function (element) {\n    row = document.createElement(\"tr\");\n    cellar = document.createElement(\"td\");\n    cellar.setAttribute(\"data-label\", \"Auto Renewal\");\n    cellcurr = document.createElement(\"td\");\n    cellcurr.setAttribute(\"data-label\", \"Currency\");\n    celllink = document.createElement(\"td\");\n    celllink.setAttribute(\"data-label\", \"Website\");\n    cellname = document.createElement(\"td\");\n    cellname.setAttribute(\"scope\", \"row\");\n    cellname.setAttribute(\"data-label\", \"Name\");\n    cellnr = document.createElement(\"td\");\n    cellnr.setAttribute(\"data-label\", \"Next Renewal\");\n    cellpri = document.createElement(\"td\");\n    cellpri.setAttribute(\"data-label\", \"Price\");\n    cellreg = document.createElement(\"td\");\n    cellreg.setAttribute(\"data-label\", \"Regularity\");\n    cellname.innerText = element.name;\n    celllink.innerText = element.link;\n    cellpri.innerText = element.price;\n    cellcurr.innerText = element.currency;\n    cellreg.innerText = element.regularity;\n    cellnr.innerText = element.nextRenewal.split(\"T\")[0];\n    cellar.innerText = element.autoRenewal === \"true\" ? \"Yes\" : \"No\";\n    row.append(cellname, celllink, cellpri, cellcurr, cellreg, cellnr, cellar);\n    table.appendChild(row);\n  });\n};\n\nvar sendRequestForSubscriptions = function sendRequestForSubscriptions(token) {\n  var myHeaders = new Headers();\n  myHeaders.append(\"Authorization\", \"Bearer \".concat(token));\n  var requestOptions = {\n    method: \"GET\",\n    headers: myHeaders,\n    redirect: \"follow\"\n  };\n  fetch(\"https://kubb.in:8080/api/subscriptions/\", requestOptions).then(function (response) {\n    return response.json();\n  }).then(function (result) {\n    return processData(result);\n  })[\"catch\"](function (error) {\n    return console.log(\"error\", error);\n  });\n};",{"version":3,"sources":["Main.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <Layout>\n    <div class=\"my-3 p-3 bg-white rounded box-shadow\">\n      <table class=\"table table-light table-responsive\">\n        <thead>\n          <tr>\n            <th scope=\"col\">Name</th>\n            <th scope=\"col\">Website</th>\n            <th scope=\"col\">Price</th>\n            <th scope=\"col\">Currency</th>\n            <th scope=\"col\">Regularity</th>\n            <th scope=\"col\">Next Renewal</th>\n            <th scope=\"col\">Auto Renewal</th>\n          </tr>\n        </thead>\n        <tbody id=\"table-data\"></tbody>\n      </table>\n    </div>\n\n    <div class=\"my-3 p-3 bg-white rounded box-shadow\">\n      <h6 class=\"border-bottom border-gray pb-2 mb-0\">Recent updates</h6>\n      <div class=\"media text-muted pt-3\">\n        <img\n          data-src=\"holder.js/32x32?theme=thumb&amp;bg=007bff&amp;fg=007bff&amp;size=1\"\n          alt=\"32x32\"\n          class=\"mr-2 rounded\"\n          style=\"width: 32px; height: 32px\"\n          src=\"https://www.plamenpetkovonline.com/assets/static/avatar.05b4712.494649193db55dfb0eaccfdf26e42952.jpg\"\n          data-holder-rendered=\"true\"\n        />\n        <p class=\"media-body pb-3 mb-0 small lh-125 border-bottom border-gray\">\n          <strong class=\"d-block text-gray-dark\">@plpetkov</strong>\n          I'm amazed to announce that the alpha version is working correctly\n        </p>\n      </div>\n\n      <small class=\"d-block text-right mt-3\">\n        <a href=\"#\">All updates</a>\n      </small>\n    </div>\n  </Layout>\n</template>\n\n<script>\nimport Layout from \"~/layouts/Main.vue\";\n\nexport default {\n  metaInfo: {\n    title: \"Kubb.in Subscription Manager\",\n  },\n  components: {\n    Layout,\n  },\n  data() {\n    return {\n      test: \"test\",\n    };\n  },\n  mounted() {\n    if (typeof window !== \"undefined\") {\n      const user = localStorage.getItem(\"user\");\n      const tokenJSON = JSON.parse(user);\n      if (tokenJSON !== null) {\n        sendRequestForSubscriptions(tokenJSON.accessToken);\n      } else {\n        window.location.href = '/login'\n      }\n      const deleteAllSubs = () => {\n        let resp = prompt(\"Are You Sure? Type yes to continue\");\n        let token = JSON.parse(localStorage.getItem(\"user\"));\n        if (resp.toLowerCase() === \"yes\") {\n          var myHeaders = new Headers();\n          myHeaders.append(\"Authorization\", `Bearer ${token.accessToken}`);\n\n          var requestOptions = {\n            method: \"DELETE\",\n            headers: myHeaders,\n            redirect: \"follow\",\n          };\n\n          fetch(\"https://kubb.in:8080/api/subscriptions/\", requestOptions)\n            .then((response) => response.text())\n            .then((result) => window.location.reload())\n            .catch((error) => console.log(\"error\", error));\n        }\n      };\n      \n      \n    }\n  },\n  methods: {\n    logout() {\n      localStorage.removeItem(\"user\");\n      window.location.href = \"/login\";\n    },\n  },\n};\n\nconst processData = (d) => {\n  const table = document.getElementById(\"table-data\");\n  const header = document.getElementById(\"header-table\");\n  let row,\n    cellar,\n    cellcurr,\n    celllink,\n    cellname,\n    cellnr,\n    cellpri,\n    cellreg,\n    headCell;\n  d.forEach((element) => {\n    row = document.createElement(\"tr\");\n    cellar = document.createElement(\"td\");\n    cellar.setAttribute(\"data-label\", \"Auto Renewal\");\n    cellcurr = document.createElement(\"td\");\n    cellcurr.setAttribute(\"data-label\", \"Currency\");\n    celllink = document.createElement(\"td\");\n    celllink.setAttribute(\"data-label\", \"Website\");\n    cellname = document.createElement(\"td\");\n    cellname.setAttribute(\"scope\", \"row\");\n    cellname.setAttribute(\"data-label\", \"Name\");\n    cellnr = document.createElement(\"td\");\n    cellnr.setAttribute(\"data-label\", \"Next Renewal\");\n    cellpri = document.createElement(\"td\");\n    cellpri.setAttribute(\"data-label\", \"Price\");\n    cellreg = document.createElement(\"td\");\n    cellreg.setAttribute(\"data-label\", \"Regularity\");\n\n    cellname.innerText = element.name;\n    celllink.innerText = element.link;\n    cellpri.innerText = element.price;\n    cellcurr.innerText = element.currency;\n    cellreg.innerText = element.regularity;\n    cellnr.innerText = element.nextRenewal.split(\"T\")[0];\n    cellar.innerText = element.autoRenewal === \"true\" ? \"Yes\" : \"No\";\n\n    row.append(cellname, celllink, cellpri, cellcurr, cellreg, cellnr, cellar);\n    table.appendChild(row);\n  });\n};\n\nconst sendRequestForSubscriptions = (token) => {\n  var myHeaders = new Headers();\n  myHeaders.append(\"Authorization\", `Bearer ${token}`);\n\n  var requestOptions = {\n    method: \"GET\",\n    headers: myHeaders,\n    redirect: \"follow\",\n  };\n\n  fetch(\"https://kubb.in:8080/api/subscriptions/\", requestOptions)\n    .then((response) => response.json())\n    .then((result) => processData(result))\n    .catch((error) => console.log(\"error\", error));\n};\n</script>\n"],"sourceRoot":"src/pages"}]}