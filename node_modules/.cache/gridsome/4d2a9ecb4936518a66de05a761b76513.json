{"remainingRequest":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/babel-loader/lib/index.js??ref--1-1!/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/plpetkov/Development/kubb.in/kubb.in-frontend/src/pages/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/src/pages/Login.vue","mtime":1613745754881},{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.includes.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  metaInfo: {\n    title: \"Login Page\"\n  },\n  data: function data() {\n    return {\n      username: \"\",\n      password: \"\",\n      hidePassword: true,\n      jsonRequest: {}\n    };\n  },\n  mounted: function mounted() {\n    if (typeof window !== \"undefined\") {\n      var _sendLoginRequest = function _sendLoginRequest(u, p) {\n        var myHeaders = new Headers();\n        myHeaders.append(\"Content-Type\", \"application/json\");\n        var raw = JSON.stringify({\n          username: u,\n          password: p\n        });\n        var requestOptions = {\n          method: \"POST\",\n          headers: myHeaders,\n          body: raw,\n          redirect: \"follow\"\n        };\n        fetch(\"https://kubb.in:8080/api/auth/signin\", requestOptions).then(function (response) {\n          return response.json();\n        }).then(function (result) {\n          return result.error ? console.log(\"wrong password todo\") : redirectWithToken(result);\n        })[\"catch\"](function (error) {\n          return console.log(\"error\", error);\n        });\n      };\n\n      var user = localStorage.getItem(\"user\");\n      var tokenJSON = JSON.parse(user);\n\n      if (user != null) {\n        if (user.includes(\"ROLE_USER\")) {\n          window.location.href = \"/main\";\n        }\n      }\n\n      var redirectWithToken = function redirectWithToken(token) {\n        if (token !== undefined) {\n          localStorage.setItem(\"user\", JSON.stringify(token));\n          window.location.href = \"/main\";\n        }\n      };\n    }\n  },\n  computed: {\n    passwordType: function passwordType() {\n      return this.hidePassword ? \"password\" : \"text\";\n    },\n    passwordIcon: function passwordIcon() {\n      return this.hidePassword ? \"fa-eye\" : \"fa-eye-slash\";\n    }\n  },\n  methods: {\n    doLogin: function doLogin() {\n      if (typeof window !== 'undefined') {\n        sendLoginRequest(\"\".concat(username.value), \"\".concat(password.value));\n      }\n    },\n    checkIfLogged: function checkIfLogged() {\n      console.log(\"jsontoken \", data.user);\n    }\n  }\n};",{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA,eAAA;AACA,EAAA,QAAA,EAAA;AACA,IAAA,KAAA,EAAA;AADA,GADA;AAIA,EAAA,IAJA,kBAIA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA,EAFA;AAGA,MAAA,YAAA,EAAA,IAHA;AAIA,MAAA,WAAA,EAAA;AAJA,KAAA;AAOA,GAZA;AAaA,EAAA,OAbA,qBAaA;AACA,QAAA,OAAA,MAAA,gBAAA,EAAA;AAAA,UAeA,iBAfA,GAeA,SAAA,iBAAA,CAAA,CAAA,EAAA,CAAA,EAAA;AACA,YAAA,SAAA,GAAA,IAAA,OAAA,EAAA;AACA,QAAA,SAAA,CAAA,MAAA,CAAA,cAAA,EAAA,kBAAA;AACA,YAAA,GAAA,GAAA,IAAA,CAAA,SAAA,CAAA;AAAA,UAAA,QAAA,EAAA,CAAA;AAAA,UAAA,QAAA,EAAA;AAAA,SAAA,CAAA;AAEA,YAAA,cAAA,GAAA;AACA,UAAA,MAAA,EAAA,MADA;AAEA,UAAA,OAAA,EAAA,SAFA;AAGA,UAAA,IAAA,EAAA,GAHA;AAIA,UAAA,QAAA,EAAA;AAJA,SAAA;AAOA,QAAA,KAAA,CAAA,sCAAA,EAAA,cAAA,CAAA,CACA,IADA,CACA,UAAA,QAAA;AAAA,iBAAA,QAAA,CAAA,IAAA,EAAA;AAAA,SADA,EAEA,IAFA,CAEA,UAAA,MAAA;AAAA,iBACA,MAAA,CAAA,KAAA,GACA,OAAA,CAAA,GAAA,CAAA,qBAAA,CADA,GAEA,iBAAA,CAAA,MAAA,CAHA;AAAA,SAFA,WAOA,UAAA,KAAA;AAAA,iBAAA,OAAA,CAAA,GAAA,CAAA,OAAA,EAAA,KAAA,CAAA;AAAA,SAPA;AAQA,OAnCA;;AACA,UAAA,IAAA,GAAA,YAAA,CAAA,OAAA,CAAA,MAAA,CAAA;AACA,UAAA,SAAA,GAAA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA;;AACA,UAAA,IAAA,IAAA,IAAA,EAAA;AACA,YAAA,IAAA,CAAA,QAAA,CAAA,WAAA,CAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,IAAA,GAAA,OAAA;AACA;AACA;;AACA,UAAA,iBAAA,GAAA,SAAA,iBAAA,CAAA,KAAA,EAAA;AACA,YAAA,KAAA,KAAA,SAAA,EAAA;AACA,UAAA,YAAA,CAAA,OAAA,CAAA,MAAA,EAAA,IAAA,CAAA,SAAA,CAAA,KAAA,CAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,IAAA,GAAA,OAAA;AACA;AACA,OALA;AA6BA;AACA,GApDA;AAqDA,EAAA,QAAA,EAAA;AACA,IAAA,YADA,0BACA;AACA,aAAA,KAAA,YAAA,GAAA,UAAA,GAAA,MAAA;AACA,KAHA;AAIA,IAAA,YAJA,0BAIA;AACA,aAAA,KAAA,YAAA,GAAA,QAAA,GAAA,cAAA;AACA;AANA,GArDA;AA6DA,EAAA,OAAA,EAAA;AACA,IAAA,OADA,qBACA;AACA,UAAA,OAAA,MAAA,KAAA,WAAA,EAAA;AACA,QAAA,gBAAA,WAAA,QAAA,CAAA,KAAA,aAAA,QAAA,CAAA,KAAA,EAAA;AACA;AACA,KALA;AAMA,IAAA,aANA,2BAMA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,YAAA,EAAA,IAAA,CAAA,IAAA;AACA;AARA;AA7DA,CAAA","sourcesContent":["<template>\n  <div>\n    <link\n      rel=\"stylesheet\"\n      href=\"https://fonts.googleapis.com/css?family=Nunito\"\n    />\n    <link\n      rel=\"stylesheet\"\n      href=\"https://use.fontawesome.com/releases/v5.0.6/css/all.css\"\n    />\n    <link rel=\"stylesheet\" href=\"login.css\" />\n    <div id=\"login\">\n      <div id=\"description\">\n        <h1>Kubb.in</h1>\n        <p>\n          By logging in you agree to the ridiculously long terms that you didn't\n          bother to read. If you don't have an account register\n          <a href=\"/register\">here</a>\n        </p>\n      </div>\n      <div id=\"form\">\n        <form @submit.prevent=\"doLogin\">\n          <label for=\"username\">Username</label>\n          <input\n            type=\"text\"\n            id=\"username\"\n            v-model=\"username\"\n            placeholder=\"username\"\n            autocomplete=\"off\"\n          />\n\n          <label for=\"password\">Password</label>&nbsp;\n          <i\n            class=\"fas\"\n            :class=\"[passwordIcon]\"\n            @click=\"hidePassword = !hidePassword\"\n          ></i>\n          <input\n            :type=\"passwordType\"\n            id=\"password\"\n            v-model=\"password\"\n            placeholder=\"**********\"\n          />\n\n          <button type=\"submit\">Log in</button>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  metaInfo: {\n    title: \"Login Page\",\n  },\n  data() {\n    return {\n      username: \"\",\n      password: \"\",\n      hidePassword: true,\n      jsonRequest: {},\n\n    };\n  },\n  mounted() {\nif (typeof window !== `undefined`) {\n  const user = localStorage.getItem(\"user\");\n  const tokenJSON = JSON.parse(user);\n      if (user != null) {\n      if (user.includes(\"ROLE_USER\")) {\n        window.location.href = \"/main\";\n      }\n    }\n  const redirectWithToken = (token) =>{\n  if (token !== undefined) {\n    localStorage.setItem(\"user\", JSON.stringify(token));\n    window.location.href = \"/main\";\n  }\n}\n\nfunction sendLoginRequest(u, p) {\n  var myHeaders = new Headers();\n  myHeaders.append(\"Content-Type\", \"application/json\");\n  var raw = JSON.stringify({ username: u, password: p });\n\n  var requestOptions = {\n    method: \"POST\",\n    headers: myHeaders,\n    body: raw,\n    redirect: \"follow\",\n  };\n\n  fetch(\"https://kubb.in:8080/api/auth/signin\", requestOptions)\n    .then((response) => response.json())\n    .then((result) =>\n      result.error\n        ? console.log(\"wrong password todo\")\n        : redirectWithToken(result)\n    )\n    .catch((error) => console.log(\"error\", error));\n}\n\n}\n  },\n  computed: {\n    passwordType() {\n      return this.hidePassword ? \"password\" : \"text\";\n    },\n    passwordIcon() {\n      return this.hidePassword ? \"fa-eye\" : \"fa-eye-slash\";\n    },\n  },\n  methods: {\n    doLogin() {\n      if(typeof window !== 'undefined'){\n        sendLoginRequest(`${username.value}`, `${password.value}`);\n      }\n    },\n    checkIfLogged() {\n      console.log(\"jsontoken \", data.user);\n    },\n  },\n};\n\n</script>"],"sourceRoot":"src/pages"}]}