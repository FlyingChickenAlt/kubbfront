{"remainingRequest":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/babel-loader/lib/index.js??ref--1-1!/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/plpetkov/Development/kubb.in/kubb.in-frontend/src/pages/Add.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/src/pages/Add.vue","mtime":1613747085331},{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.split.js\";\nimport \"core-js/modules/es.string.link.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/web.timers.js\";\nimport _defineProperty from \"/home/plpetkov/Development/kubb.in/kubb.in-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Layout from \"~/layouts/Main.vue\";\nexport default _defineProperty({\n  metaInfo: {\n    title: \"Add a new Subscription\"\n  },\n  components: {\n    Layout: Layout\n  },\n  data: function data() {\n    return {\n      subname: \"\",\n      autorenewal: \"\",\n      currency: \"\",\n      price: \"\",\n      nextrenewal: \"\",\n      site: \"\",\n      regularity: \"\"\n    };\n  },\n  methods: {\n    sendRequestAddNewSubscription: function sendRequestAddNewSubscription() {\n      if (typeof window !== 'undefined') {\n        window.sendRequestAddNewSubscriptionf(JSON.parse(localStorage.getItem(\"user\")).accessToken, this.getFormObj());\n      }\n    },\n    getFormObj: function getFormObj() {\n      return {\n        name: this.subname,\n        autorenewal: this.autorenewal,\n        currency: this.currency,\n        price: this.price,\n        nextrenewal: this.nextrenewal,\n        site: this.site,\n        regularity: this.regularity\n      };\n    }\n  },\n  mounted: function mounted() {\n    if (typeof window !== \"undefined\") {\n      var user = localStorage.getItem(\"user\");\n      var tokenJSON = JSON.parse(user);\n      window.addEventListener(\"load\", function () {\n        if (tokenJSON == undefined || tokenJSON == null) {\n          window.location.href = \"/login\";\n        }\n      });\n\n      var processData = function processData(d) {\n        var table = document.getElementById(\"table-data\");\n        var header = document.getElementById(\"header-table\");\n        var row, cellar, cellcurr, celllink, cellname, cellnr, cellpri, cellreg, headCell;\n        d.forEach(function (element) {\n          row = document.createElement(\"tr\");\n          cellar = document.createElement(\"td\");\n          cellar.setAttribute(\"data-label\", \"Auto Renewal\");\n          cellcurr = document.createElement(\"td\");\n          cellcurr.setAttribute(\"data-label\", \"Currency\");\n          celllink = document.createElement(\"td\");\n          celllink.setAttribute(\"data-label\", \"Website\");\n          cellname = document.createElement(\"td\");\n          cellname.setAttribute(\"scope\", \"row\");\n          cellname.setAttribute(\"data-label\", \"Name\");\n          cellnr = document.createElement(\"td\");\n          cellnr.setAttribute(\"data-label\", \"Next Renewal\");\n          cellpri = document.createElement(\"td\");\n          cellpri.setAttribute(\"data-label\", \"Price\");\n          cellreg = document.createElement(\"td\");\n          cellreg.setAttribute(\"data-label\", \"Regularity\");\n          cellname.innerText = element.name;\n          celllink.innerText = element.link;\n          cellpri.innerText = element.price;\n          cellcurr.innerText = element.currency;\n          cellreg.innerText = element.regularity;\n          cellnr.innerText = element.nextRenewal.split(\"T\")[0];\n          cellar.innerText = element.autoRenewal === \"true\" ? \"Yes\" : \"No\";\n          row.append(cellname, celllink, cellpri, cellcurr, cellreg, cellnr, cellar);\n          table.appendChild(row);\n        });\n      };\n\n      var sendRequestForSubscriptions = function sendRequestForSubscriptions(token) {\n        var myHeaders = new Headers();\n        myHeaders.append(\"Authorization\", \"Bearer \".concat(token));\n        var requestOptions = {\n          method: \"GET\",\n          headers: myHeaders,\n          redirect: \"follow\"\n        };\n        fetch(\"https://kubb.in:8080/api/subscriptions/\", requestOptions).then(function (response) {\n          return response.json();\n        }).then(function (result) {\n          return processData(result);\n        })[\"catch\"](function (error) {\n          return console.log(\"error\", error);\n        });\n      };\n\n      var submitBtn = document.getElementById(\"submitBtn\");\n      /*\n      */\n\n      window.sendRequestAddNewSubscriptionf = function (token, sub) {\n        var validations = validateSub(sub);\n\n        if (validations) {\n          var myHeaders = new Headers();\n          myHeaders.append(\"Authorization\", \"Bearer \".concat(token));\n          myHeaders.append(\"Content-Type\", \"application/json\");\n          var raw = JSON.stringify({\n            autoRenewal: \"\".concat(sub.autorenewal),\n            currency: \"\".concat(sub.currency),\n            link: \"\".concat(sub.site),\n            name: \"\".concat(sub.name),\n            nextRenewal: \"\".concat(sub.nextrenewal),\n            price: \"\".concat(sub.price),\n            regularity: \"\".concat(sub.regularity)\n          });\n          var requestOptions = {\n            method: \"PUT\",\n            headers: myHeaders,\n            body: raw,\n            redirect: \"follow\"\n          };\n          fetch(\"https://kubb.in:8080/api/subscription/\", requestOptions).then(function (response) {\n            return response.text();\n          }).then(function (result) {\n            return window.location.reload();\n          })[\"catch\"](function (error) {\n            return console.log(\"error\", error);\n          });\n        }\n      };\n\n      var deleteAllSubs = function deleteAllSubs() {\n        var resp = prompt(\"Are You Sure? Type yes to continue\");\n\n        if (resp.toLowerCase() === \"yes\") {\n          var myHeaders = new Headers();\n          myHeaders.append(\"Authorization\", \"Bearer \".concat(tokenJSON.accessToken));\n          var requestOptions = {\n            method: \"DELETE\",\n            headers: myHeaders,\n            redirect: \"follow\"\n          };\n          fetch(\"https://kubb.in:8080/api/subscriptions/\", requestOptions).then(function (response) {\n            return response.text();\n          }).then(function (result) {\n            return window.location.reload();\n          })[\"catch\"](function (error) {\n            return console.log(\"error\", error);\n          });\n        }\n      };\n\n      var logout = function logout() {\n        localStorage.removeItem(\"user\");\n      };\n\n      var showAlert = function showAlert(alert) {\n        var alertParent = alert.parentElement;\n        var alertEle = document.createElement(\"div\");\n        alertEle.innerText = \"Wrong input, please introduce valid data\";\n        alertEle.className = \"alert alert-danger fade show\";\n        alertParent.insertBefore(alertEle, alert.parentElement.children[0]);\n        setTimeout(closeAlert, 2500);\n      };\n\n      var closeAlert = function closeAlert() {\n        //$(\".alert\").alert(\"close\");\n        document.getElementsByClassName(\"alert\")[0].remove();\n      };\n\n      var validateSub = function validateSub(sub) {\n        //name is not empty or null\n        if (sub.name == \"\" || sub.name == null || sub.name == undefined) {\n          showAlert(document.getElementById(\"name\"));\n          return false;\n        }\n\n        if (sub.site == \"\" || sub.site == null || sub.site == undefined) {\n          showAlert(document.getElementById(\"site\"));\n          return false;\n        } //price is only numbers\n\n\n        if (/[0-9]{1,}/.test(sub.price) != true || sub.price == null || sub.price == undefined) {\n          showAlert(price);\n          return false;\n        } //currency is only letters\n\n\n        if (sub.currency == \"\" || sub.currency == null || sub.currency == undefined) {\n          showAlert(currency);\n          return false;\n        } //regularity is only letters\n\n\n        if (sub.regularity == \"\" || sub.regularity == null || sub.regularity == undefined) {\n          showAlert(regularity);\n          return false;\n        }\n\n        if (sub.autorenewal != \"true\" && sub.autorenewal != \"false\" || sub.autorenewal == null || sub.autorenewal == undefined) {\n          showAlert(autorenewal);\n          return false;\n        }\n\n        return true;\n      };\n\n      if (tokenJSON != null) {\n        sendRequestForSubscriptions(tokenJSON.accessToken);\n      }\n    }\n  },\n  created: function created() {}\n}, \"metaInfo\", {\n  title: \"About us\"\n});",{"version":3,"sources":["/home/plpetkov/Development/kubb.in/kubb.in-frontend/src/pages/Add.vue"],"names":["Layout","metaInfo","title","components","data","subname","autorenewal","currency","price","nextrenewal","site","regularity","methods","sendRequestAddNewSubscription","window","sendRequestAddNewSubscriptionf","JSON","parse","localStorage","getItem","accessToken","getFormObj","name","mounted","user","tokenJSON","addEventListener","undefined","location","href","processData","d","table","document","getElementById","header","row","cellar","cellcurr","celllink","cellname","cellnr","cellpri","cellreg","headCell","forEach","element","createElement","setAttribute","innerText","link","nextRenewal","split","autoRenewal","append","appendChild","sendRequestForSubscriptions","token","myHeaders","Headers","requestOptions","method","headers","redirect","fetch","then","response","json","result","error","console","log","submitBtn","sub","validations","validateSub","raw","stringify","body","text","reload","deleteAllSubs","resp","prompt","toLowerCase","logout","removeItem","showAlert","alert","alertParent","parentElement","alertEle","className","insertBefore","children","setTimeout","closeAlert","getElementsByClassName","remove","test","created"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,OAAOA,MAAP,MAAmB,oBAAnB;AAEA;AACEC,EAAAA,QAAQ,EAAE;AACRC,IAAAA,KAAK,EAAE;AADC,GADZ;AAIEC,EAAAA,UAAU,EAAE;AACVH,IAAAA,MAAM,EAANA;AADU,GAJd;AAOEI,EAAAA,IAPF,kBAOS;AACL,WAAO;AACLC,MAAAA,OAAO,EAAE,EADJ;AAELC,MAAAA,WAAW,EAAE,EAFR;AAGLC,MAAAA,QAAQ,EAAE,EAHL;AAILC,MAAAA,KAAK,EAAE,EAJF;AAKLC,MAAAA,WAAW,EAAE,EALR;AAMLC,MAAAA,IAAI,EAAE,EAND;AAOLC,MAAAA,UAAU,EAAE;AAPP,KAAP;AASD,GAjBH;AAkBEC,EAAAA,OAAO,EAAE;AACPC,IAAAA,6BADO,2CACyB;AAC9B,UAAG,OAAOC,MAAP,KAAkB,WAArB,EAAiC;AAC/BA,QAAAA,MAAM,CAACC,8BAAP,CAAsCC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAA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","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Layout from \"~/layouts/Main.vue\";\n\nexport default {\n  metaInfo: {\n    title: \"Add a new Subscription\",\n  },\n  components: {\n    Layout,\n  },\n  data() {\n    return {\n      subname: \"\",\n      autorenewal: \"\",\n      currency: \"\",\n      price: \"\",\n      nextrenewal: \"\",\n      site: \"\",\n      regularity: \"\",\n    };\n  },\n  methods: {\n    sendRequestAddNewSubscription() {\n      if(typeof window !== 'undefined'){\n        window.sendRequestAddNewSubscriptionf(JSON.parse(localStorage.getItem(\"user\")).accessToken, this.getFormObj());\n      }\n    },\n    getFormObj() {\n      return {\n        name: this.subname,\n        autorenewal: this.autorenewal,\n        currency: this.currency,\n        price: this.price,\n        nextrenewal: this.nextrenewal,\n        site: this.site,\n        regularity: this.regularity,\n      };\n    },\n  },\n  mounted() {\n    if (typeof window !== `undefined`) {\n      const user = localStorage.getItem(\"user\");\n      const tokenJSON = JSON.parse(user);\n      window.addEventListener(\"load\", () => {\n        if (tokenJSON == undefined || tokenJSON == null) {\n          window.location.href = \"/login\";\n        }\n      });\n\n      const processData = (d) => {\n        const table = document.getElementById(\"table-data\");\n        const header = document.getElementById(\"header-table\");\n        let row,\n          cellar,\n          cellcurr,\n          celllink,\n          cellname,\n          cellnr,\n          cellpri,\n          cellreg,\n          headCell;\n        d.forEach((element) => {\n          row = document.createElement(\"tr\");\n          cellar = document.createElement(\"td\");\n          cellar.setAttribute(\"data-label\", \"Auto Renewal\");\n          cellcurr = document.createElement(\"td\");\n          cellcurr.setAttribute(\"data-label\", \"Currency\");\n          celllink = document.createElement(\"td\");\n          celllink.setAttribute(\"data-label\", \"Website\");\n          cellname = document.createElement(\"td\");\n          cellname.setAttribute(\"scope\", \"row\");\n          cellname.setAttribute(\"data-label\", \"Name\");\n          cellnr = document.createElement(\"td\");\n          cellnr.setAttribute(\"data-label\", \"Next Renewal\");\n          cellpri = document.createElement(\"td\");\n          cellpri.setAttribute(\"data-label\", \"Price\");\n          cellreg = document.createElement(\"td\");\n          cellreg.setAttribute(\"data-label\", \"Regularity\");\n\n          cellname.innerText = element.name;\n          celllink.innerText = element.link;\n          cellpri.innerText = element.price;\n          cellcurr.innerText = element.currency;\n          cellreg.innerText = element.regularity;\n          cellnr.innerText = element.nextRenewal.split(\"T\")[0];\n          cellar.innerText = element.autoRenewal === \"true\" ? \"Yes\" : \"No\";\n\n          row.append(\n            cellname,\n            celllink,\n            cellpri,\n            cellcurr,\n            cellreg,\n            cellnr,\n            cellar\n          );\n          table.appendChild(row);\n        });\n      };\n\n      const sendRequestForSubscriptions = (token) => {\n        var myHeaders = new Headers();\n        myHeaders.append(\"Authorization\", `Bearer ${token}`);\n\n        var requestOptions = {\n          method: \"GET\",\n          headers: myHeaders,\n          redirect: \"follow\",\n        };\n\n        fetch(\"https://kubb.in:8080/api/subscriptions/\", requestOptions)\n          .then((response) => response.json())\n          .then((result) => processData(result))\n          .catch((error) => console.log(\"error\", error));\n      };\n      const submitBtn = document.getElementById(\"submitBtn\");\n      /*\n\n\n*/\nwindow.sendRequestAddNewSubscriptionf = (token, sub) => {\n        let validations = validateSub(sub);\n        if (validations) {\n          var myHeaders = new Headers();\n          myHeaders.append(\"Authorization\", `Bearer ${token}`);\n          myHeaders.append(\"Content-Type\", \"application/json\");\n\n          var raw = JSON.stringify({\n            autoRenewal: `${sub.autorenewal}`,\n            currency: `${sub.currency}`,\n            link: `${sub.site}`,\n            name: `${sub.name}`,\n            nextRenewal: `${sub.nextrenewal}`,\n            price: `${sub.price}`,\n            regularity: `${sub.regularity}`,\n          });\n\n          var requestOptions = {\n            method: \"PUT\",\n            headers: myHeaders,\n            body: raw,\n            redirect: \"follow\",\n          };\n\n          fetch(\"https://kubb.in:8080/api/subscription/\", requestOptions)\n            .then((response) => response.text())\n            .then((result) => window.location.reload())\n            .catch((error) => console.log(\"error\", error));\n        }\n      };\n\n      const deleteAllSubs = () => {\n        let resp = prompt(\"Are You Sure? Type yes to continue\");\n\n        if (resp.toLowerCase() === \"yes\") {\n          var myHeaders = new Headers();\n          myHeaders.append(\"Authorization\", `Bearer ${tokenJSON.accessToken}`);\n\n          var requestOptions = {\n            method: \"DELETE\",\n            headers: myHeaders,\n            redirect: \"follow\",\n          };\n\n          fetch(\"https://kubb.in:8080/api/subscriptions/\", requestOptions)\n            .then((response) => response.text())\n            .then((result) => window.location.reload())\n            .catch((error) => console.log(\"error\", error));\n        }\n      };\n      const logout = () => {\n        localStorage.removeItem(\"user\");\n      };\n\n      const showAlert = (alert) => {\n        const alertParent = alert.parentElement;\n        const alertEle = document.createElement(\"div\");\n        alertEle.innerText = \"Wrong input, please introduce valid data\";\n        alertEle.className = \"alert alert-danger fade show\";\n        alertParent.insertBefore(alertEle, alert.parentElement.children[0]);\n\n        setTimeout(closeAlert, 2500);\n      };\n\n      const closeAlert = () => {\n        //$(\".alert\").alert(\"close\");\n        document.getElementsByClassName(\"alert\")[0].remove();\n      };\n\n      const validateSub = (sub) => {\n        //name is not empty or null\n        if (sub.name == \"\" || sub.name == null || sub.name == undefined) {\n          showAlert(document.getElementById(\"name\"));\n\n          return false;\n        }\n        if (sub.site == \"\" || sub.site == null || sub.site == undefined) {\n          showAlert(document.getElementById(\"site\"));\n\n          return false;\n        }\n        //price is only numbers\n        if (\n          /[0-9]{1,}/.test(sub.price) != true ||\n          sub.price == null ||\n          sub.price == undefined\n        ) {\n          showAlert(price);\n\n          return false;\n        }\n        //currency is only letters\n        if (\n          sub.currency == \"\" ||\n          sub.currency == null ||\n          sub.currency == undefined\n        ) {\n          showAlert(currency);\n\n          return false;\n        }\n        //regularity is only letters\n        if (\n          sub.regularity == \"\" ||\n          sub.regularity == null ||\n          sub.regularity == undefined\n        ) {\n          showAlert(regularity);\n\n          return false;\n        }\n\n        if (\n          (sub.autorenewal != \"true\" && sub.autorenewal != \"false\") ||\n          sub.autorenewal == null ||\n          sub.autorenewal == undefined\n        ) {\n          showAlert(autorenewal);\n\n          return false;\n        }\n        return true;\n      };\n    if (tokenJSON != null) {\n      sendRequestForSubscriptions(tokenJSON.accessToken);\n    }\n    }\n  },\n  created() {\n    \n  },\n  metaInfo: {\n    title: \"About us\",\n  },\n};\n"]}]}